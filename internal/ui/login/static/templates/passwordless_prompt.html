{{template "main-top" .}}

<div class="lgn-head">
    <h1>{{t "PasswordlessPrompt.Title"}}</h1>
    {{ template "user-profile" . }}

    {{if .SetupEnabled}}
    <p>{{t "PasswordlessPrompt.Description"}}</p>
    {{else}}
    <p>{{t "PasswordlessPrompt.DescriptionInit"}}</p>
    {{end}}
</div>

<form action="{{ passwordlessPromptUrl }}" method="POST">

    {{ .CSRF }}

    <input type="hidden" name="authRequestID" value="{{ .AuthReqID }}" />

    <div class="lgn-actions">
        <!-- position element in header -->
        <a class="lgn-icon-button lgn-left-action" href="{{ loginUrl }}">
            <i class="lgn-icon-arrow-left-solid"></i>
        </a>

        {{if .SetupEnabled}}
        {{if not .Required}}
        <button class="lgn-stroked-button lgn-primary" name="skip" value="true" type="submit" formnovalidate>{{t "PasswordlessPrompt.SkipButtonText"}}</button>
        {{end}}

        <span class="fill-space"></span>
        <button class="lgn-raised-button lgn-primary" type="submit">{{t "PasswordlessPrompt.PasswordlessButtonText"}}</button>
        {{end}}
    </div>

</form>

{{if and .SetupEnabled .MFAProviders}}
<form action="{{ mfaPromptUrl }}" method="POST">

    {{ .CSRF }}

    <input type="hidden" name="authRequestID" value="{{ .AuthReqID }}" />

    <p>{{t "PasswordlessPrompt.Alternative2FA"}}</p>
    <div class="fields">
        {{ range $provider := .MFAProviders}}
        {{ $providerName := (t (printf "InitMFAPrompt.Provider%v" $provider)) }}
        <div class="lgn-radio block">
            <input id="{{ $provider }}" type="radio" name="provider" value="{{ $provider }}" required>
            <label for="{{ $provider }}">{{ $providerName }}</label>
        </div>
        {{ end }}
    </div>
    {{end}}

    <div class="lgn-actions">
        <span class="fill-space"></span>
        <button class="lgn-stroked-button lgn-primary" type="submit">{{t "PasswordlessPrompt.NextButtonText"}}</button>
    </div>
</form>


{{template "main-bottom" .}}