<ng-container *ngIf="(authService.user | async) || undefined as user">
  <ng-container *ngIf="['iam.read$', 'iam.write$'] | hasRole as iamuser$">
    <div class="main-container">
      <cnsl-header
        *ngIf="user"
        [org]="org"
        [user]="user"
        [isDarkTheme]="componentCssClass === 'dark-theme'"
        [labelpolicy]="labelpolicy"
        (changedActiveOrg)="changedOrg($event)"
      ></cnsl-header>

      <cnsl-nav
        id="mainnav"
        class="nav"
        [ngClass]="{ shadow: yoffset > 60 }"
        *ngIf="user"
        [org]="org"
        [user]="user"
        [isDarkTheme]="componentCssClass === 'dark-theme'"
        [labelpolicy]="labelpolicy"
      ></cnsl-nav>
      <div class="router-container" [@routeAnimations]="prepareRoute(outlet)">
        <div class="outlet">
          <router-outlet class="outlet" #outlet="outlet"></router-outlet>
        </div>
      </div>
      <span class="fill-space"></span>
      <cnsl-footer [privateLabelPolicy]="labelpolicy"></cnsl-footer>
    </div>
  </ng-container>
</ng-container>
