Tracing:
  Type: google
  Config:
    ProjectID: $ZITADEL_TRACING_PROJECT_ID
    MetricPrefix: ZITADEL-V1
    Fraction: $ZITADEL_TRACING_FRACTION

Log:
  Level: $ZITADEL_LOG_LEVEL
  Formatter:
    Format: text

Mgmt:
  API:
    GRPC:
      ServerPort: 50010
      GatewayPort: 50011
      CustomHeaders:
        - x-zitadel-
  Repository:
    SearchLimit: 100
    Domain: zitadel.ch
    Eventstore:
      ServiceName: 'ManagementAPI'
      Repository:
        SQL:
          Host: $ZITADEL_EVENTSTORE_HOST
          Port: $ZITADEL_EVENTSTORE_PORT
          User: 'management'
          Database: 'eventstore'
          SSLmode: disable
      Cache:
        Type: 'fastcache'
        Config:
          MaxCacheSizeInByte: 10485760 #10mb
    View:
      Host: $ZITADEL_EVENTSTORE_HOST
      Port: $ZITADEL_EVENTSTORE_PORT
      User: 'management'
      Database: 'management'
      SSLmode: disable
    Spooler:
      ConcurrentTasks: 4
      BulkLimit: 100
      FailureCountUntilSkip: 5

Auth:
  API:
    GRPC:
      ServerPort: 50020
      GatewayPort: 50021
      CustomHeaders:
        - x-zitadel-
    OIDC:
      OPConfig:
        Issuer: $ZITADEL_ISSUER
        DefaultLogoutRedirectURI: $ZITADEL_ACCOUNTS/logout/done
        Port: 50022
      StorageConfig:
        DefaultLoginURL: $ZITADEL_ACCOUNTS/login?authRequestID=
        DefaultAccessTokenLifetime: 12h
        DefaultIdTokenLifetime: 12h
        SigningKeyAlgorithm: RS256
      UserAgentCookieConfig:
        Name: caos.zitadel.useragent
        Domain: $ZITADEL_COOKIE_DOMAIN
        Key:
          EncryptionKeyID: $ZITADEL_COOKIE_KEY
      Endpoints:
        Auth:
          Path: 'authorize'
          URL: '$ZITADEL_AUTHORIZE/authorize'
        Token:
          Path: 'token'
          URL: '$ZITADEL_OAUTH/token'
        EndSession:
          Path: 'endsession'
          URL: '$ZITADEL_AUTHORIZE/endsession'
        Userinfo:
          Path: 'userinfo'
          URL: '$ZITADEL_OAUTH/userinfo'
        Keys:
          Path: 'keys'
          URL: '$ZITADEL_OAUTH/keys'
  Repository:
    SearchLimit: 100
    Eventstore:
      ServiceName: 'authAPI'
      Repository:
        SQL:
          Host: $ZITADEL_EVENTSTORE_HOST
          Port: $ZITADEL_EVENTSTORE_PORT
          User: 'auth'
          Database: 'eventstore'
          SSLmode: disable
      Cache:
        Type: 'fastcache'
        Config:
          MaxCacheSizeInByte: 10485760 #10mb
    AuthRequest:
      Connection:
        Host: $ZITADEL_EVENTSTORE_HOST
        Port: $ZITADEL_EVENTSTORE_PORT
        User: 'auth'
        Database: 'auth'
        SSLmode: disable
    View:
      Host: $ZITADEL_EVENTSTORE_HOST
      Port: $ZITADEL_EVENTSTORE_PORT
      User: 'auth'
      Database: 'auth'
      SSLmode: disable
    Spooler:
      ConcurrentTasks: 4
      BulkLimit: 100
      FailureCountUntilSkip: 5
    KeyConfig:
      Size: 2048
      PrivateKeyLifetime: 6h
      PublicKeyLifetime: 30h
      EncryptionConfig:
        EncryptionKeyID: $ZITADEL_OIDC_KEYS_ID
      SigningKeyRotation: 10s

Login:
  Handler:
    Port: 50031
    OidcAuthCallbackURL: '$ZITADEL_AUTHORIZE/authorize/'
    ZitadelURL: '$ZITADEL_CONSOLE'
    LanguageCookieName: 'caos.zitadel.login.lang'
    DefaultLanguage: 'de'


AuthZ:
  Repository:
    Eventstore:
      ServiceName: 'AuthZ'
      Repository:
        SQL:
          Host: $ZITADEL_EVENTSTORE_HOST
          Port: $ZITADEL_EVENTSTORE_PORT
          User: 'authz'
          Database: 'eventstore'
          SSLmode: disable
      Cache:
        Type: 'fastcache'
        Config:
          MaxCacheSizeInByte: 10485760 #10mb
    View:
      Host: $ZITADEL_EVENTSTORE_HOST
      Port: $ZITADEL_EVENTSTORE_PORT
      User: 'authz'
      Database: 'authz'
      SSLmode: disable
    Spooler:
      ConcurrentTasks: 1
      BulkLimit: 100
      FailureCountUntilSkip: 5

Admin:
  API:
    GRPC:
      ServerPort: 50040
      GatewayPort: 50041
      CustomHeaders:
        - x-zitadel-
  Repository:
    SearchLimit: 100
    Domain: zitadel.ch
    Eventstore:
      ServiceName: 'Admin'
      Repository:
        SQL:
          Host: $ZITADEL_EVENTSTORE_HOST
          Port: $ZITADEL_EVENTSTORE_PORT
          User: 'admin_api'
          Database: 'eventstore'
          SSLmode: disable
      Cache:
        Type: 'fastcache'
        Config:
          MaxCacheSizeInByte: 10485760 #10mb
    View:
      Host: $ZITADEL_EVENTSTORE_HOST
      Port: $ZITADEL_EVENTSTORE_PORT
      User: 'admin_api'
      Database: 'admin_api'
      SSLmode: disable
    Spooler:
      ConcurrentTasks: 1
      BulkLimit: 100
      FailureCountUntilSkip: 5

Console:
  Port: 50050
  EnvOverwriteDir: $ZITADEL_CONSOLE_ENV_DIR


Notification:
  Repository:
    DefaultLanguage: 'de'
    Eventstore:
      ServiceName: 'Notification'
      Repository:
        SQL:
          Host: $ZITADEL_EVENTSTORE_HOST
          Port: $ZITADEL_EVENTSTORE_PORT
          User: 'notification'
          Database: 'eventstore'
          SSLmode: disable
      Cache:
        Type: 'fastcache'
        Config:
          MaxCacheSizeInByte: 10485760 #10mb
    View:
      Host: $ZITADEL_EVENTSTORE_HOST
      Port: $ZITADEL_EVENTSTORE_PORT
      User: 'notification'
      Database: 'notification'
      SSLmode: disable
    Spooler:
      ConcurrentTasks: 4
      BulkLimit: 100
      FailureCountUntilSkip: 5
      Handlers:
        Notification:
          MinimumCycleDuration: 10s