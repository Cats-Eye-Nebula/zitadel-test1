FROM alpine:latest as user
RUN addgroup -S zitadel && adduser -S zitadel -G zitadel

FROM scratch
COPY --from=user /etc/passwd /etc/passwd
COPY .build/go /app
COPY cmd/zitadel/*.yaml /app/

USER zitadel

HEALTHCHECK NONE

ENTRYPOINT ["/app/zitadel"]