#
FROM alpine:latest as prepare
RUN adduser -D zitadel
COPY .build/go/zitadel /
COPY cmd/zitadel/*.yaml /
RUN chmod a+x /zitadel

#
FROM scratch as final
COPY --from=prepare /etc/passwd /etc/passwd
COPY --from=prepare / /

USER zitadel

HEALTHCHECK NONE

ENTRYPOINT ["/zitadel"]
## TODO enable CMD