syntax = "proto3";

import "zitadel/application.proto";
import "zitadel/idp.proto";
import "zitadel/user.proto";
import "zitadel/object.proto";
import "zitadel/options.proto";
import "zitadel/org.proto";
import "zitadel/member.proto";
import "zitadel/project.proto";
import "zitadel/policy.proto";
import "zitadel/message.proto";

import "google/api/annotations.proto";
import "google/api/field_behavior.proto";
import "google/protobuf/timestamp.proto";
import "google/protobuf/duration.proto";
import "protoc-gen-openapiv2/options/annotations.proto";
import "validate/validate.proto";


package zitadel.management.v1;

option go_package ="github.com/caos/zitadel/pkg/grpc/management";

option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {
    swagger: "2.0",
    info: {
        title: "management api of ZITADEL";
        version: "1.0";
        description: "it's for managing organisation internal and extnernal objects.";
        contact:{
            name: "CAOS developers of ZITADEL"
            url: "https://zitadel.ch"
            email: "hi@caos.ch" //TODO: is there a zitadel@caos.ch?
        }
        license: {
            name: "Apache License 2.0",
            url: "https://github.com/caos/zitadel/blob/master/LICENSE"
        };
    };

    schemes: HTTPS;
    consumes: "application/json";
    produces: "application/json";
    
    consumes: "application/grpc";
    produces: "application/grpc";

    consumes: "application/grpc-web+proto";
    produces: "application/grpc-web+proto";


    external_docs: {
        description: "Detailed information about ZITADEL",
        url: "https://docs.zitadel.ch"
    }
};


service ManagementService {
    rpc Healthz(HealthzRequest) returns (HealthzResponse) {
        option (google.api.http) = {
            get: "/healthz"
        };
    }

    rpc GetUserByID(GetUserByIDRequest) returns (GetUserByIDResponse) {
        option (google.api.http) = {
            get: "/users/{id}"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.read"
        };
    }

    // GetUserByLoginNameGlobal searches a user over all organisations
    // the login name has to match exactly
    rpc GetUserByLoginNameGlobal(GetUserByLoginNameGlobalRequest) returns (GetUserByLoginNameGlobalResponse) {
        option (google.api.http) = {
            get: "/global/users/_byloginname"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.global.read"
        };

        option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
            summary: "Search a user within all organisations by it's loginname";
            description: "The request only returns data if the login name matches exactly."
            tags: "user";
            tags: "global";
            responses: {
                key: "200"
                value: {
                    description: "OK";
                }
                //TODO: errors
            };
        };
    }

    // Limit should always be set, there is a default limit set by the service
    rpc ListUsers(ListUsersRequest) returns (ListUsersResponse) {
        option (google.api.http) = {
            post: "/users/_search"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.read"
        };
    }

    rpc IsUserUnique(IsUserUniqueRequest) returns (IsUserUniqueResponse) {
        option (google.api.http) = {
            get: "/users/_isunique"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.read"
        };
    }

    rpc CreateUser(CreateUserRequest) returns (CreateUserResponse) {
        option (google.api.http) = {
            post: "/users"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.write"
        };
    }

    rpc DeactivateUser(DeactivateUserRequest) returns (DeactivateUserResponse) {
        option (google.api.http) = {
            put: "/users/{id}/_deactivate"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.write"
        };
    }

    rpc ReactivateUser(ReactivateUserRequest) returns (ReactivateUserResponse) {
        option (google.api.http) = {
            put: "/users/{id}/_reactivate"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.write"
        };
    }

    rpc LockUser(LockUserRequest) returns (LockUserResponse) {
        option (google.api.http) = {
            put: "/users/{id}/_lock"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.write"
        };
    }

    rpc UnlockUser(UnlockUserRequest) returns (UnlockUserResponse) {
        option (google.api.http) = {
            put: "/users/{id}/_unlock"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.write"
        };
    }

    rpc DeleteUser(DeleteUserRequest) returns (DeleteUserResponse) {
        option (google.api.http) = {
            delete: "/users/{id}"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.delete"
        };
    }

    rpc UpdateUserName(UpdateUserNameRequest) returns (UpdateUserNameResponse) {
        option (google.api.http) = {
            get: "/users/{user_id}/username"
        };
        
        option (zitadel.v1.auth_option) = {
            permission: "user.write"
        };
    }

    rpc GetHumanProfile(GetHumanProfileRequest) returns (GetHumanProfileResponse) {
        option (google.api.http) = {
            get: "/users/{user_id}/profile"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.read"
        };
    }

    rpc UpdateHumanProfile(UpdateHumanProfileRequest) returns (UpdateHumanProfileResponse) {
        option (google.api.http) = {
            put: "/users/{user_id}/profile"
            body: "profile"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.write"
        };
    }

    rpc GetHumanEmail(GetHumanEmailRequest) returns (GetHumanEmailResponse) {
        option (google.api.http) = {
            get: "/users/{user_id}/email"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.read"
        };
    }

    rpc UpdateHumanEmail(UpdateHumanEmailRequest) returns (UpdateHumanEmailResponse) {
        option (google.api.http) = {
            put: "/users/{user_id}/email"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.write"
        };
    }

    rpc ResendHumanInitialization(ResendHumanInitializationRequest) returns (ResendHumanInitializationResponse) {
        option (google.api.http) = {
            post: "/users/{user_id}/_resendinitialisation" //TODO: verb?
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.write"
        };
    }

    //TODO: previously ResendEmailVerificationMail
    rpc ResendHumanEmailVerification(ResendEmailVerificationRequest) returns (ResendEmailVerificationResponse) {
        option (google.api.http) = {
            post: "/users/{user_id}/email/_resendverification"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.write"
        };
    }  

    rpc GetHumanPhone(GetHumanPhoneRequest) returns (GetHumanPhoneResponse) {
        option (google.api.http) = {
            get: "/users/{user_id}/phone"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.read"
        };
    }

    rpc UpdateHumanPhone(UpdateHumanPhoneRequest) returns (UpdateHumanPhoneResponse) {
        option (google.api.http) = {
            put: "/users/{user_id}/phone"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.write"
        };
    }

    rpc RemoveHumanPhone(RemoveHumanPhoneRequest) returns (RemoveHumanPhoneResponse) {
        option (google.api.http) = {
            delete: "/users/{user_id}/phone"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.write"
        };
    }

    rpc ResendHumanPhoneVerification(ResendHumanPhoneVerificationRequest) returns (ResendHumanPhoneVerificationResponse) {
        option (google.api.http) = {
            post: "/users/{user_id}/phone/_resendverification"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.write"
        };
    }

    rpc GetHumanAddress(GetHumanAddressRequest) returns (GetHumanAddressResponse) {
        option (google.api.http) = {
            get: "/users/{user_id}/address"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.read"
        };
    }

    rpc UpdateHumanAddress(UpdateHumanAddressRequest) returns (UpdateHumanAddressResponse) {
        option (google.api.http) = {
            put: "/users/{user_id}/address"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.write"
        };
    }

    // A Manager is only allowed to set an initial password, on the next login the user has to change his password
    rpc SetInitialPassword(SetInitialPasswordRequest) returns (SetInitialPasswordResponse) {
        option (google.api.http) = {
            post: "/users/{user_id}/password/_initialize"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.write"
        };
    }

    rpc UpdateMachine(UpdateMachineRequest) returns (UpdateMachineResponse) {
        option (google.api.http) = {
            put: "/users/{id}/machine"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.write"
        };
    }

    rpc GetMachineKeyByIDs(GetMachineKeyByIDsRequest) returns (GetMachineKeyByIDsResponse) {
        option (google.api.http) = {
            post: "/users/{user_id}/keys/{key_id}"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.read"
        };
    }

    rpc ListMachineKeys(ListMachineKeysRequest) returns (ListMachineKeysResponse) {
        option (google.api.http) = {
            post: "/users/{user_id}/keys/_search"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.read"
        };
    }

    rpc AddMachineKey(AddMachineKeyRequest) returns (AddMachineKeyResponse) {
        option (google.api.http) = {
            post: "/users/{user_id}/keys"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.write"
        };
    }

    rpc RemoveMachineKey(RemoveMachineKeyRequest) returns (RemoveMachineKeyResponse) {
        option (google.api.http) = {
            delete: "/users/{user_id}/keys/{key_id}"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.write"
        };
    }

    rpc ListUserIDPs(ListUserIDPsRequest) returns (ListUserIDPsResponse) {
        option (google.api.http) = {
            post: "/users/{user_id}/idps/_search"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "user.read"
        };
    }

    rpc RemoveUserIDP(RemoveUserIDPRequest) returns (RemoveUserIDPResponse) {
        option (google.api.http) = {
            delete: "/users/{user_id}/idps/{idp_id}/{linked_user_id}"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "user.write"
        };
    }

    rpc ListUserMemberships(ListUserMembershipsRequest) returns (ListUserMembershipsResponse) {
        option (google.api.http) = {
            post: "/users/{user_id}/memberships/_search"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "user.membership.read"
        };
    }






    rpc GetMyOrg(GetMyOrgRequest) returns (GetMyOrgResponse) {
        option (google.api.http) = {
            get: "/orgs/me"
        };

        option (zitadel.v1.auth_option) = {
            permission: "org.read"
        };
    }

    rpc GetOrgByDomainGlobal(GetOrgByDomainGlobalRequest) returns (GetOrgByDomainGlobalResponse) {
        option (google.api.http) = {
            get: "/global/orgs/_bydomain"
        };

        option (zitadel.v1.auth_option) = {
            permission: "org.global.read"
        };
    }

    rpc CreateOrg(CreateOrgRequest) returns (CreateOrgResponse) {
        option (google.api.http) = {
            post: "/orgs"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "org.create"
        };
    }

    rpc DeactivateOrg(DeactivateOrgRequest) returns (DeactivateOrgResponse) {
        option (google.api.http) = {
            put: "/orgs/me/_deactivate"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "org.write"
        };
    }

    rpc ReactivateOrg(ReactivateOrgRequest) returns (ReactivateOrgResponse) {
        option (google.api.http) = {
            put: "/orgs/me/_reactivate"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "org.write"
        };
    }

    rpc GetOrgIAMPolicy(GetOrgIAMPolicyRequest) returns (GetOrgIAMPolicyResponse) {
        option (google.api.http) = {
            get: "/orgs/me/iampolicy"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "authenticated"
        };
    }

    rpc ListOrgDomains(ListOrgDomainsRequest) returns (ListOrgDomainsResponse) {
        option (google.api.http) = {
            post: "/orgs/me/domains/_search"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "org.read"
        };
    }

    rpc AddOrgDomain(AddOrgDomainRequest) returns (AddOrgDomainResponse) {
        option (google.api.http) = {
            post: "/orgs/me/domains"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "org.write"
        };
    }

    rpc RemoveOrgDomain(RemoveOrgDomainRequest) returns (RemoveOrgDomainResponse) {
        option (google.api.http) = {
            delete: "/orgs/me/domains/{domain}"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "org.write"
        };
    }

    rpc GenerateOrgDomainValidation(GenerateOrgDomainValidationRequest) returns (GenerateOrgDomainValidationResponse) {
        option (google.api.http) = {
            post: "/orgs/me/domains/{domain}/validation/create"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "org.write"
        };
    }

    rpc ValidateOrgDomain(ValidateOrgDomainRequest) returns (ValidateOrgDomainResponse) {
        option (google.api.http) = {
            post: "/orgs/me/domains/{domain}/validation/check"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "org.write"
        };
    }

    rpc SetPrimaryOrgDomain(SetPrimaryOrgDomainRequest) returns (SetPrimaryOrgDomainResponse) {
        option (google.api.http) = {
            post: "/orgs/me/domains/{domain}/_primary"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "org.write"
        };
    }

    rpc ListOrgMemberRoles(ListOrgMemberRolesRequest) returns (ListOrgMemberRolesResponse) {
        option (google.api.http) = {
            get: "/orgs/members/roles"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "org.member.read"
        };
    }

    rpc ListOrgMembers(ListOrgMembersRequest) returns (ListOrgMembersResponse) {
        option (google.api.http) = {
            post: "/orgs/me/members/_search"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "org.member.read"
        };
    }

    rpc AddOrgMember(AddOrgMemberRequest) returns (AddOrgMemberResponse) {
        option (google.api.http) = {
            post: "/orgs/me/members"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "org.member.write"
        };
    }

    rpc ChangeOrgMember(ChangeOrgMemberRequest) returns (ChangeOrgMemberResponse) {
        option (google.api.http) = {
            put: "/orgs/me/members/{user_id}"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "org.member.write"
        };
    }

    rpc RemoveOrgMember(RemoveOrgMemberRequest) returns (RemoveOrgMemberResponse) {
        option (google.api.http) = {
            delete: "/orgs/me/members/{user_id}"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "org.member.delete"
        };
    }

    rpc GetProjectByID(GetProjectByIDRequest) returns (GetProjectByIDResponse) {
        option (google.api.http) = {
            get: "/projects/{id}"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.read"
            check_field_name: "Id"
        };
    }

    rpc ListProjects(ListProjectsRequest) returns (ListProjectsResponse) {
        option (google.api.http) = {
            post: "/projects/_search"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.read"
        };
    }

      // returns all projects my organisation got granted from another organisation
    rpc ListGrantedProjects(ListGrantedProjectsRequest) returns (ListGrantedProjectsResponse) {
        option (google.api.http) = {
            post: "/grantedprojects/_search"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.read"
        };
    }

    // returns a project my organisation got granted from another organisation
    rpc GetGrantedProjectByID(GetGrantedProjectByIDRequest) returns (GetGrantedProjectByIDResponse) {
        option (google.api.http) = {
            get: "/grantedprojects/{project_id}/grants/{id}"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.read"
            check_field_name: "Id"
        };
    }

    rpc CreateProject(CreateProjectRequest) returns (CreateProjectResponse) {
        option (google.api.http) = {
            post: "/projects"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.create"
        };
    }

    rpc UpdateProject(UpdateProjectRequest) returns (UpdateProjectResponse) {
        option (google.api.http) = {
            put: "/projects/{id}"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.write"
            check_field_name: "Id"
        };
    }

    rpc DeactivateProject(DeactivateProjectRequest) returns (DeactivateProjectResponse) {
        option (google.api.http) = {
            put: "/projects/{id}/_deactivate"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.write"
            check_field_name: "Id"
        };
    }

    rpc ReactivateProject(ReactivateProjectRequest) returns (ReactivateProjectResponse) {
        option (google.api.http) = {
            put: "/projects/{id}/_reactivate"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.write"
            check_field_name: "Id"
        };
    }

    rpc RemoveProject(RemoveProjectRequest) returns (RemoveProjectResponse) {
        option (google.api.http) = {
            delete: "/projects/{id}"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.delete"
            check_field_name: "Id"
        };
    }

    //TODO: do we need this? i asume that these are from zitadel?
    rpc ListProjectMemberRoles(ListProjectMemberRolesRequest) returns (ListProjectMemberRolesResponse) {
        option (google.api.http) = {
            get: "/projects/members/roles"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.member.read"
        };
    }

    rpc ListProjectRoles(ListProjectRolesRequest) returns (ListProjectRolesResponse) {
        option (google.api.http) = {
            post: "/projects/{project_id}/roles/_search"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.role.read"
            check_field_name: "ProjectId"
        };
    }

    rpc AddProjectRole(AddProjectRoleRequest) returns (AddProjectRoleResponse) {
        option (google.api.http) = {
            post: "/projects/{id}/roles"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.role.write"
            check_field_name: "Id"
        };
    }

  // add a list of project roles in one request
    rpc BulkAddProjectRoles(BulkAddProjectRolesRequest) returns (BulkAddProjectRolesResponse) {
        option (google.api.http) = {
            post: "/projects/{id}/roles/_bulk"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.role.write"
            check_field_name: "Id"
        };
    }

    rpc UpdateProjectRole(UpdateProjectRoleRequest) returns (UpdateProjectRoleResponse) {
        option (google.api.http) = {
            put: "/projects/{id}/roles/{key}"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.role.write"
            check_field_name: "Id"
        };
    }

    // RemoveProjectRole removes role from UserGrants, ProjectGrants and from Project
    rpc RemoveProjectRole(RemoveProjectRoleRequest) returns (RemoveProjectRoleResponse) {
        option (google.api.http) = {
            delete: "/projects/{id}/roles/{key}"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.role.delete"
            check_field_name: "Id"
        };
    }

    rpc ListProjectMembers(ListProjectMembersRequest) returns (ListProjectMembersResponse) {
        option (google.api.http) = {
            post: "/projects/{project_id}/members/_search"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.member.read"
            check_field_name: "ProjectId"
        };
    }

    rpc AddProjectMember(AddProjectMemberRequest) returns (AddProjectMemberResponse) {
        option (google.api.http) = {
            post: "/projects/{id}/members"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.member.write"
            check_field_name: "Id"
        };
    }

    rpc UpdateProjectMember(UpdateProjectMemberRequest) returns (UpdateProjectMemberResponse) {
        option (google.api.http) = {
            put: "/projects/{id}/members/{user_id}"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.member.write"
            check_field_name: "Id"
        };
    }

    rpc RemoveProjectMember(RemoveProjectMemberRequest) returns (RemoveProjectMemberResponse) {
        option (google.api.http) = {
            delete: "/projects/{id}/members/{user_id}"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.member.delete"
            check_field_name: "Id"
        };
    }

    rpc GetApplicationByID(GetApplicationByIDRequest) returns (GetApplicationByIDResponse) {
        option (google.api.http) = {
            get: "/projects/{project_id}/applications/{id}"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.app.read"
            check_field_name: "ProjectId"
        };
    }

    rpc ListApplications(ListApplicationsRequest) returns (ListApplicationsResponse) {
        option (google.api.http) = {
            post: "/projects/{project_id}/applications/_search"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.app.read"
            check_field_name: "ProjectId"
        };
    }

    rpc CreateOIDCApplication(CreateOIDCApplicationRequest) returns (CreateOIDCApplicationResponse) {
        option (google.api.http) = {
            post: "/projects/{project_id}/applications/oidc"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.app.write"
            check_field_name: "ProjectId"
        };
    }

    rpc CreateAPIApplication(CreateAPIApplicationRequest) returns (CreateAPIApplicationResponse) {
        option (google.api.http) = {
            post: "/projects/{project_id}/applications/api"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.app.write"
            check_field_name: "ProjectId"
        };
    }

    rpc UpdateApplication(UpdateApplicationRequest) returns (UpdateApplicationResponse) {
        option (google.api.http) = {
            put: "/projects/{project_id}/applications/{id}"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.app.write"
            check_field_name: "ProjectId"
        };
    }

    rpc UpdateOIDCApplicationConfig(UpdateOIDCApplicationConfigRequest) returns (UpdateOIDCApplicationConfigResponse) {
        option (google.api.http) = {
            put: "/projects/{project_id}/applications/{application_id}/oidcconfig"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.app.write"
            check_field_name: "ProjectId"
        };
    }

    rpc UpdateAPIApplicationConfig(UpdateAPIApplicationConfigRequest) returns (UpdateAPIApplicationConfigResponse) {
        option (google.api.http) = {
            put: "/projects/{project_id}/applications/{application_id}/apiconfig"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.app.write"
            check_field_name: "ProjectId"
        };
    }

    rpc DeactivateApplication(DeactivateApplicationRequest) returns (DeactivateApplicationResponse) {
        option (google.api.http) = {
            put: "/projects/{project_id}/applications/{id}/_deactivate"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.app.write"
            check_field_name: "ProjectId"
        };
    }

    rpc ReactivateApplication(ReactivateApplicationRequest) returns (ReactivateApplicationResponse) {
        option (google.api.http) = {
            put: "/projects/{project_id}/applications/{id}/_reactivate"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.app.write"
            check_field_name: "ProjectId"
        };
    }

    rpc RemoveApplication(RemoveApplicationRequest) returns (RemoveApplicationResponse) {
        option (google.api.http) = {
            delete: "/projects/{project_id}/applications/{id}"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.app.delete"
            check_field_name: "ProjectId"
        };
    }

    rpc RegenerateOIDCClientSecret(RegenerateOIDCClientSecretRequest) returns (RegenerateOIDCClientSecretResponse) {
        option (google.api.http) = {
            put: "/projects/{project_id}/applications/{id}/oidcconfig/_changeclientsecret"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.app.write"
            check_field_name: "ProjectId"
        };
    }

    rpc RegenerateAPIClientSecret(RegenerateAPIClientSecretRequest) returns (RegenerateAPIClientSecretResponse) {
        option (google.api.http) = {
            put: "/projects/{project_id}/applications/{id}/apiconfig/_changeclientsecret"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.app.write"
            check_field_name: "ProjectId"
        };
    }

    rpc GetAPIClientKey(GetAPIClientKeyRequest) returns (GetAPIClientKeyResponse) {
        option (google.api.http) = {
            get: "/projects/{project_id}/applications/{application_id}/keys/{key_id}"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.app.read"
            check_field_name: "ProjectId"
        };
    }

    rpc ListAPIClientKeys(ListAPIClientKeysRequest) returns (ListAPIClientKeysResponse) {
        option (google.api.http) = {
            post: "/projects/{project_id}/applications/{application_id}/keys/_search"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.app.read"
            check_field_name: "ProjectId"
        };
    }

    rpc AddAPIClientKey(AddAPIClientKeyRequest) returns (AddAPIClientKeyResponse){
        option (google.api.http) = {
            post: "/projects/{project_id}/applications/{application_id}/keys"
            body: "*"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.app.write"
            check_field_name: "ProjectId"
        };
    }

    rpc RemoveAPIClientKey(RemoveAPIClientKeyRequest) returns (RemoveAPIClientKeyResponse) {
        option (google.api.http) = {
            delete: "/projects/{project_id}/applications/{application_id}/keys/{key_id}"
        };

        option (caos.zitadel.utils.v1.auth_option) = {
            permission: "project.app.write"
            check_field_name: "ProjectId"
        };
    }
















//TODO: ...OrgIDP... or is comment enough?
    rpc GetOrgIDPByID(GetOrgIDPByIDRequest) returns (GetOrgIDPByIDResponse) {
        option (google.api.http) = {
            get: "/orgs/me/idps/{id}"
        };

        option (zitadel.v1.auth_option) = {
            permission: "org.idp.read"
        };
    }

    rpc ListOrgIDPs(ListOrgIDPsRequest) returns (ListOrgIDPsResponse) {
        option (google.api.http) = {
            post: "/orgs/me/idps/_search"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "org.idp.read"
        };
    }

    rpc CreateOrgIDP(CreateOrgIDPRequest) returns (CreateOrgIDPResponse) {
        option (google.api.http) = {
            post: "/orgs/me/idps"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "org.idp.write"
        };
    }

    rpc DeactivateOrgIDP(DeactivateOrgIDPRequest) returns (DeactivateOrgIDPResponse) {
        option (google.api.http) = {
            put: "/orgs/me/idps/{id}/_deactivate"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "org.idp.write"
        };
    }

    rpc ReactivateOrgIDP(ReactivateOrgIDPRequest) returns (ReactivateOrgIDPResponse) {
        option (google.api.http) = {
            put: "/orgs/me/idps/{id}/_reactivate"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "org.idp.write"
        };
    }

    rpc RemoveOrgIDP(RemoveOrgIDPRequest) returns (RemoveOrgIDPResponse) {
        option (google.api.http) = {
            delete: "/orgs/me/idps/{id}"
        };

        option (zitadel.v1.auth_option) = {
            permission: "org.idp.write"
        };
    }

    rpc UpdateOrgIDP(UpdateOrgIDPRequest) returns (UpdateOrgIDPResponse) {
        option (google.api.http) = {
            put: "/orgs/me/idps/{id}"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "org.idp.write"
        };
    }

    rpc UpdateOrgIDPOIDCConfig(UpdateOrgIDPOIDCConfigRequest) returns (UpdateOrgIDPOIDCConfigResponse) {
        option (google.api.http) = {
            put: "/orgs/me/idps/{idp_id}/oidcconfig"
            body: "*"
        };

        option (zitadel.v1.auth_option) = {
            permission: "org.idp.write"
        };
    }
}

message HealthzRequest {}

message HealthzResponse {}

message GetUserByIDRequest {
    string id = 1 [
        (google.api.field_behavior) = REQUIRED
    ];
}

message GetUserByIDResponse {
    zitadel.user.v1.User user = 1;
}

message GetUserByLoginNameGlobalRequest{
    string login_name = 1 [
        (google.api.field_behavior) = REQUIRED
    ];
}

message GetUserByLoginNameGlobalResponse {
    zitadel.user.v1.User user = 1;
}

message ListUsersRequest {
    zitadel.v1.Search meta_data = 1;
    zitadel.user.v1.UserFieldName sorting_column = 2;
    zitadel.user.v1.SearchQuery query = 3;
}

message ListUsersResponse {
    zitadel.v1.Search meta_data = 1;
    zitadel.user.v1.UserFieldName sorting_column = 2;
    repeated zitadel.user.v1.User result = 3;
}

message IsUserUniqueRequest {
    string user_name = 1 [
        (validate.rules).string.pattern = "^[^[:space:]]{1,200}$",
        (google.api.field_behavior) = REQUIRED
    ];
    //TODO: email still needed or should it be login_names?
    string email = 2  [
        (validate.rules).string = {min_len: 1, max_len: 200},
        (google.api.field_behavior) = REQUIRED
    ];
}

message IsUserUniqueResponse {
    bool is_unique = 1;
}

message CreateUserRequest {
    string user_name = 1;
    oneof type {
        zitadel.user.v1.Human human = 2;
        zitadel.user.v1.Machine machine = 3;
    }
}

message CreateUserResponse {
    string id = 1;
    zitadel.v1.MetaData meta_data = 2;
}

message DeactivateUserRequest {
    string id = 1 [
        (google.api.field_behavior) = REQUIRED
    ];
}

message DeactivateUserResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message ReactivateUserRequest {
    string id = 1 [
        (google.api.field_behavior) = REQUIRED
    ];
}

message ReactivateUserResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message LockUserRequest {
    string id = 1 [
        (google.api.field_behavior) = REQUIRED
    ];
}

message LockUserResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message UnlockUserRequest {
    string id = 1 [
        (google.api.field_behavior) = REQUIRED
    ];
}

message UnlockUserResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message DeleteUserRequest {
    string id = 1 [
        (google.api.field_behavior) = REQUIRED
    ];
}

message DeleteUserResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message UpdateUserNameRequest {
    string user_id = 1 [
        (google.api.field_behavior) = REQUIRED
    ];
    string user_name = 2 [
        (google.api.field_behavior) = REQUIRED
    ];
}

message UpdateUserNameResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message GetHumanProfileRequest {
    string user_id = 1 [
        (google.api.field_behavior) = REQUIRED
    ];
}

message GetHumanProfileResponse {
    string user_id = 1;
    zitadel.v1.MetaData meta_data = 2;
}

message UpdateHumanProfileRequest {
    string user_id = 1 [
        (google.api.field_behavior) = REQUIRED
    ];
    zitadel.user.v1.Profile profile = 2 [
        (google.api.field_behavior) = REQUIRED
    ];
}

message UpdateHumanProfileResponse {
    string user_id = 1;
    zitadel.v1.MetaData meta_data = 3;
}

message GetHumanEmailRequest {
    string user_id = 1 [
        (google.api.field_behavior) = REQUIRED
    ];
}

message GetHumanEmailResponse {
    string user_id = 1;
    zitadel.user.v1.Email email = 3;
}

message UpdateHumanEmailRequest {
    string user_id = 1 [
        (google.api.field_behavior) = REQUIRED
    ];
    zitadel.user.v1.Email email = 2 [
        (google.api.field_behavior) = REQUIRED
    ];
}

message UpdateHumanEmailResponse {
    string user_id = 1;
    zitadel.v1.MetaData meta_data = 2;
}

message ResendHumanInitializationRequest {
    string user_id = 1 [
        (google.api.field_behavior) = REQUIRED
    ];
}

message ResendHumanInitializationResponse {}

message ResendEmailVerificationRequest {
    string user_id = 1 [
        (google.api.field_behavior) = REQUIRED
    ];
}

message ResendEmailVerificationResponse {}

message GetHumanPhoneRequest {
    string user_id = 1 [
        (google.api.field_behavior) = REQUIRED
    ];
}

message GetHumanPhoneResponse {
    string user_id = 1;
    zitadel.v1.MetaData meta_data = 2;
}

message UpdateHumanPhoneRequest {
    string user_id = 1 [
        (google.api.field_behavior) = REQUIRED
    ];
    zitadel.user.v1.Phone phone = 2 [
        (google.api.field_behavior) = REQUIRED
    ];
}

message UpdateHumanPhoneResponse {
    string user_id = 1;
    zitadel.v1.MetaData meta_data = 2;
}

message RemoveHumanPhoneRequest {
    string user_id = 1 [
        (google.api.field_behavior) = REQUIRED
    ];
}

message RemoveHumanPhoneResponse {}

message ResendHumanPhoneVerificationRequest {
    string user_id = 1 [
        (google.api.field_behavior) = REQUIRED
    ];
}

message ResendHumanPhoneVerificationResponse {}

message GetHumanAddressRequest {
    string user_id = 1 [
        (google.api.field_behavior) = REQUIRED
    ];
}

message GetHumanAddressResponse {
    string user_id = 1;
    zitadel.v1.MetaData meta_data = 2;
}

message UpdateHumanAddressRequest {
    string user_id = 1 [
        (google.api.field_behavior) = REQUIRED
    ];
    zitadel.user.v1.Address address = 2 [
        (google.api.field_behavior) = REQUIRED
    ];
}

message UpdateHumanAddressResponse {
    string user_id = 1;
    zitadel.v1.MetaData meta_data = 2;
}

message SetInitialPasswordRequest {
    string user_id = 1 [(validate.rules).string.min_len = 1];
    string password = 2 [(validate.rules).string = {min_len: 1, max_len: 72}];
}

message SetInitialPasswordResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message UpdateMachineRequest {
    string user_id = 1;
    //TODO: discuss with or without description?
    string description = 2 [(validate.rules).string.max_len = 500];
    string name = 3 [(validate.rules).string = {min_len: 1, max_len: 200}];
}

message UpdateMachineResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message GetMachineKeyByIDsRequest {
    string user_id = 1;
    string key_id = 2;
}

message GetMachineKeyByIDsResponse {
    zitadel.v1.MetaData meta_data = 1;
    zitadel.user.v1.MachineKey key = 2;
}

message ListMachineKeysRequest {
    string user_id = 1;
    zitadel.v1.Search meta_data = 2;
}

message ListMachineKeysResponse {
    zitadel.v1.Search meta_data = 1;
    repeated zitadel.user.v1.MachineKey result = 2;
}

message AddMachineKeyRequest {
    string user_id = 1 [(validate.rules).string.min_len = 1];
    zitadel.user.v1.MachineKeyType type = 2 [(validate.rules).enum = {not_in: [0]}];
    google.protobuf.Timestamp expiration_date = 3;
}
  
message AddMachineKeyResponse {
    string id = 1;
    bytes key_details = 2;
    zitadel.v1.MetaData meta_data = 3;
}

message RemoveMachineKeyRequest {
    string user_id = 1;
    string key_id = 2;
}

message RemoveMachineKeyResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message ListUserIDPsRequest {
    string user_id = 1;
    zitadel.v1.Search meta_data = 2;
}

message ListUserIDPsResponse {
    zitadel.v1.Search meta_data = 1;
    repeated zitadel.idp.v1.IDPLink result = 2;
}

message RemoveUserIDPRequest {
    string user_id = 1;
    string linked_user_id = 2;
}

message RemoveUserIDPResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message ListUserMembershipsRequest {
    string user_id = 1;
    zitadel.v1.Search meta_data = 2;
    repeated zitadel.user.v1.MembershipQuery queries = 3;
}

message ListUserMembershipsResponse {
    zitadel.v1.Search meta_data = 1;
    repeated zitadel.user.v1.Membership result = 2;
}







message GetMyOrgRequest {}

message GetMyOrgResponse {
    zitadel.v1.MetaData meta_data = 1;
    zitadel.org.v1.Org org = 2;
}

message GetOrgByDomainGlobalRequest {
    string domain = 1;
}

message GetOrgByDomainGlobalResponse {
    zitadel.v1.MetaData meta_data = 1;
    zitadel.org.v1.Org org = 2;
}

message CreateOrgRequest {
    string name = 1;
}

message CreateOrgResponse {
    string id = 1;
    zitadel.v1.MetaData meta_data = 2;
}

message DeactivateOrgRequest {}

message DeactivateOrgResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message ReactivateOrgRequest {}

message ReactivateOrgResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message GetOrgIAMPolicyRequest {}

message GetOrgIAMPolicyResponse {
    zitadel.v1.MetaData meta_data = 1;
    zitadel.policy.v1.OrgIAMPolicy policy = 2;
}

message ListOrgDomainsRequest {
    zitadel.v1.Search meta_data = 1;
    repeated zitadel.org.v1.DomainSearchQuery queries = 2;
}

message ListOrgDomainsResponse {
    zitadel.v1.Search meta_data = 1;
    repeated zitadel.org.v1.Domain result = 2;
}

message AddOrgDomainRequest {
    string domain = 1;
}

message AddOrgDomainResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message RemoveOrgDomainRequest {
    string domain = 1;
}

message RemoveOrgDomainResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message GenerateOrgDomainValidationRequest {
    string domain = 1;
    zitadel.org.v1.OrgDomainValidationType type = 2;
}

message GenerateOrgDomainValidationResponse {
    zitadel.v1.MetaData meta_data = 1;
    string token = 2;
    string url = 3;
}

message ValidateOrgDomainRequest {
    string domain = 1;
}

message ValidateOrgDomainResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message SetPrimaryOrgDomainRequest {
    string domain = 1;
}

message SetPrimaryOrgDomainResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message ListOrgMemberRolesRequest {}

message ListOrgMemberRolesResponse {
    repeated string roles = 1;
}

message ListOrgMembersRequest {
    zitadel.v1.Search meta_data = 1;
    repeated zitadel.org.v1.MemberSearchQuery queries = 2;
}

message ListOrgMembersResponse {
    zitadel.v1.Search meta_data = 1;
    repeated zitadel.member.v1.Member result = 2;
}

message AddOrgMemberRequest {
    string user_id = 1;
    repeated string roles = 2;
}
message AddOrgMemberResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message ChangeOrgMemberRequest {
    string user_id = 1;
    repeated string roles = 2;
}

message ChangeOrgMemberResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message RemoveOrgMemberRequest {
    string user_id = 1;
}

message RemoveOrgMemberResponse {
    zitadel.v1.MetaData meta_data = 1;
}




message GetProjectByIDRequest {
    string project_id = 1;
}

message GetProjectByIDResponse {
    zitadel.project.v1.Project project = 1;
}

message ListProjectsRequest {
    zitadel.v1.Search meta_data = 1;
    repeated zitadel.project.v1.ProjectQuery queries = 2;
}

message ListProjectsResponse {
    zitadel.v1.Search meta_data = 1;
    repeated zitadel.project.v1.Project result = 2;
}

message ListGrantedProjectsRequest {
    zitadel.v1.Search meta_data = 1;
    repeated zitadel.project.v1.ProjectQuery queries = 2;
}

message ListGrantedProjectsResponse {
    zitadel.v1.Search meta_data = 1;
    repeated zitadel.project.v1.GrantedProject result = 2;
}

message GetGrantedProjectByIDRequest {
    string project_id = 1;
    string grant_id = 2;
}

message GetGrantedProjectByIDResponse {
    zitadel.project.v1.GrantedProject granted_project = 1;
}

message CreateProjectRequest {
    string name = 1 [(validate.rules).string = {min_len: 1, max_len: 200}];
    bool project_role_assertion = 2;
    bool project_role_check = 3;
}

message CreateProjectResponse {
    string project_id = 1;
    zitadel.v1.MetaData meta_data = 2;
}

message UpdateProjectRequest {
    string project_id = 1 [(validate.rules).string = {min_len: 1}];
    string name = 2 [(validate.rules).string = {min_len: 1, max_len: 200}];
    bool project_role_assertion = 3;
    bool project_role_check = 4;
}

message UpdateProjectResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message DeactivateProjectRequest {
    string project_id = 1;
}

message DeactivateProjectResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message ReactivateProjectRequest {
    string project_id = 1;
}

message ReactivateProjectResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message RemoveProjectRequest {
    string project_id = 1;
}

message RemoveProjectResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message ListProjectMemberRolesRequest {}

message ListProjectMemberRolesResponse {
    zitadel.v1.Search meta_data = 1;
    repeated string roles = 2;
}

message ListProjectRolesRequest {
    string project_id = 1;
    zitadel.v1.Search meta_data = 2;
    repeated zitadel.project.v1.RoleQuery queries = 3;
}

message ListProjectRolesResponse {
    zitadel.v1.Search meta_data = 1;
    repeated zitadel.project.v1.Role result = 2;
}

message AddProjectRoleRequest {
    string project_id = 1 [(validate.rules).string = {min_len: 1}];
    string key = 2 [(validate.rules).string = {min_len: 1}];
    string display_name = 3;
    string group = 4;
}

message AddProjectRoleResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message BulkAddProjectRolesRequest {
    message Role {
        string key = 1 [(validate.rules).string = {min_len: 1}];
        string display_name = 2;
        string group = 3;
    }

    string project_id = 1;
    repeated Role roles = 2;
}

message BulkAddProjectRolesResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message UpdateProjectRoleRequest {
    string project_id = 1;
    string key = 2 [(validate.rules).string = {min_len: 1}];
    string display_name = 3;
    string group = 4;
}

message UpdateProjectRoleResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message RemoveProjectRoleRequest {
    string project_id = 1;
    string key = 2;
}
message RemoveProjectRoleResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message ListProjectMembersRequest {
    string project_id = 1;
    zitadel.v1.Search meta_data = 2;
    repeated zitadel.member.v1.SearchQuery queries = 3;
}

message ListProjectMembersResponse {
    zitadel.v1.Search meta_data = 1;
    repeated zitadel.member.v1.Member result = 2;
}

message AddProjectMemberRequest {
    string project_id = 1 [(validate.rules).string = {min_len: 1}];
    string user_id = 2 [(validate.rules).string = {min_len: 1}];
    repeated string roles = 3;
}

message AddProjectMemberResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message UpdateProjectMemberRequest {
    string project_id = 1 [(validate.rules).string = {min_len: 1}];
    string user_id = 2 [(validate.rules).string = {min_len: 1}];
    repeated string roles = 3;
}
message UpdateProjectMemberResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message RemoveProjectMemberRequest {
    string project_id = 1;
    string user_id = 2;
}

message RemoveProjectMemberResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message GetApplicationByIDRequest {
    string project_id = 1;
    string app_id = 2;
}

message GetApplicationByIDResponse {
    zitadel.app.v1.App app = 1;
}

message ListApplicationsRequest {
    string project_id = 1;
    zitadel.v1.Search meta_data = 2;
    repeated zitadel.app.v1.AppQuery queries = 3;
}

message ListApplicationsResponse {
    zitadel.v1.Search meta_data = 1;
    repeated zitadel.app.v1.App result = 2;
}

message CreateOIDCApplicationRequest {
    string project_id = 1 [(validate.rules).string = {min_len: 1}];
    string name = 2 [(validate.rules).string = {min_len: 1, max_len: 200}];
    repeated string redirect_uris = 3;
    repeated zitadel.app.v1.OIDCResponseType response_types = 4;
    repeated zitadel.app.v1.OIDCGrantType grant_types = 5;
    zitadel.app.v1.OIDCApplicationType application_type = 6;
    zitadel.app.v1.OIDCAuthMethodType auth_method_type = 7;
    repeated string post_logout_redirect_uris = 8;
    zitadel.app.v1.OIDCVersion version = 9;
    bool dev_mode = 10;
    zitadel.app.v1.OIDCTokenType access_token_type = 11;
    bool access_token_role_assertion = 12;
    bool id_token_role_assertion = 13;
    bool id_token_userinfo_assertion = 14;
    google.protobuf.Duration clock_skew = 15 [(validate.rules).duration = {gte: {}, lte: {seconds: 5}}];
}

message CreateOIDCApplicationResponse {
    string app_id = 1;
    zitadel.v1.MetaData meta_data = 2;
    string client_id = 3;
    string client_secret = 4;
    bool none_compliant = 5;
    repeated zitadel.v1.LocalizedMessage compliance_problems = 6;
}

message CreateAPIApplicationRequest {
    string project_id = 1 [(validate.rules).string = {min_len: 1}];
    string name = 2 [(validate.rules).string = {min_len: 1, max_len: 200}];
    zitadel.app.v1.APIAuthMethodType auth_method_type = 3;
}

message CreateAPIApplicationResponse {
    string app_id = 1;
    zitadel.v1.MetaData meta_data = 2;
    string client_id = 3;
    string client_secret = 4;
}

message UpdateApplicationRequest {
    string project_id = 1 [(validate.rules).string = {min_len: 1}];
    string app_id = 2 [(validate.rules).string = {min_len: 1}];
    string name = 5 [(validate.rules).string = {min_len: 1, max_len: 200}];
}

message UpdateApplicationResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message UpdateOIDCApplicationConfigRequest {
    string project_id = 1 [(validate.rules).string = {min_len: 1}];
    string application_id = 2 [(validate.rules).string = {min_len: 1}];
    
    repeated string redirect_uris = 3;
    repeated zitadel.app.v1.OIDCResponseType response_types = 4;
    repeated zitadel.app.v1.OIDCGrantType grant_types = 5;
    zitadel.app.v1.OIDCApplicationType application_type = 6;
    zitadel.app.v1.OIDCAuthMethodType auth_method_type = 7;
    repeated string post_logout_redirect_uris = 8;
    bool dev_mode = 9;
    zitadel.app.v1.OIDCTokenType access_token_type = 10;
    bool access_token_role_assertion = 11;
    bool id_token_role_assertion = 12;
    bool id_token_userinfo_assertion = 13;
    google.protobuf.Duration clock_skew = 14 [(validate.rules).duration = {gte: {}, lte: {seconds: 5}}];
}

message UpdateOIDCApplicationConfigResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message UpdateAPIApplicationConfigRequest {
    string project_id = 1 [(validate.rules).string = {min_len: 1}];
    string app_id = 2 [(validate.rules).string = {min_len: 1}];
    zitadel.app.v1.APIAuthMethodType auth_method_type = 7;
}

message UpdateAPIApplicationConfigResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message DeactivateApplicationRequest {
    string project_id = 1 [(validate.rules).string = {min_len: 1}];
    string app_id = 2 [(validate.rules).string = {min_len: 1}];
}

message DeactivateApplicationResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message ReactivateApplicationRequest {
    string project_id = 1 [(validate.rules).string = {min_len: 1}];
    string app_id = 2 [(validate.rules).string = {min_len: 1}];
}

message ReactivateApplicationResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message RemoveApplicationRequest {
    string project_id = 1 [(validate.rules).string = {min_len: 1}];
    string app_id = 2 [(validate.rules).string = {min_len: 1}];
}

message RemoveApplicationResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message RegenerateOIDCClientSecretRequest {
    string project_id = 1;
    string app_id = 2;
}

message RegenerateOIDCClientSecretResponse {
    string client_secret = 1;
    zitadel.v1.MetaData meta_data = 2;
}

message RegenerateAPIClientSecretRequest {
    string project_id = 1;
    string app_id = 2;
}

message RegenerateAPIClientSecretResponse {
    string client_secret = 1;
    zitadel.v1.MetaData meta_data = 2;
}

message GetAPIClientKeyRequest {
    string project_id = 1 [(validate.rules).string.min_len = 1];
    string app_id = 2 [(validate.rules).string.min_len = 1];
    string key_id = 3 [(validate.rules).string.min_len = 1];
}

message GetAPIClientKeyResponse {
    zitadel.app.v1.APIClientKey key = 1;
}

message ListAPIClientKeysRequest {
    zitadel.v1.Search meta_data = 1;
    string app_id = 2;
    string project_id = 3;
}
message ListAPIClientKeysResponse {
    zitadel.v1.Search meta_data = 1;
    repeated zitadel.app.v1.APIClientKey result = 2;
}

message AddAPIClientKeyRequest {
    string project_id = 1 [(validate.rules).string.min_len = 1];
    string app_id = 2 [(validate.rules).string.min_len = 1];
    zitadel.app.v1.AuthNKeyType type = 3 [(validate.rules).enum = {not_in: [0]}];
    google.protobuf.Timestamp expiration_date = 4;
}

message AddAPIClientKeyResponse {
    zitadel.v1.MetaData meta_data = 1;
    string id = 2;
    bytes key_details = 3;
}

message RemoveAPIClientKeyRequest {
    string project_id = 1 [(validate.rules).string.min_len = 1];
    string app_id = 2 [(validate.rules).string.min_len = 1];
    string key_id = 3 [(validate.rules).string.min_len = 1];
}

message RemoveAPIClientKeyResponse {
    zitadel.v1.MetaData meta_data = 1;
}







message GetOrgIDPByIDRequest {
    string id = 1;
}

message GetOrgIDPByIDResponse {
    zitadel.v1.MetaData meta_data = 1;
    zitadel.idp.v1.IDP idp = 2;
}

message ListOrgIDPsRequest {
    zitadel.v1.Search meta_data = 1;
    zitadel.idp.v1.IDPFieldName sorting_column = 2;
    repeated zitadel.idp.v1.IDPQuery queries = 3;
}

message ListOrgIDPsResponse {
    zitadel.v1.Search meta_data = 1;
    zitadel.idp.v1.IDPFieldName sorting_column = 2;
    repeated zitadel.idp.v1.IDP result = 3;
}

message CreateOrgIDPRequest {
    zitadel.idp.v1.IDP idp = 1;
}

message CreateOrgIDPResponse {
    zitadel.v1.MetaData meta_data = 1;
    zitadel.idp.v1.IDP idp = 2;
}

message DeactivateOrgIDPRequest {
    string id = 1;
}

message DeactivateOrgIDPResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message ReactivateOrgIDPRequest {
    string id = 1;
}

message ReactivateOrgIDPResponse {
    zitadel.v1.MetaData meta_data = 1;
}

message RemoveOrgIDPRequest {
    string id = 1;
}

message RemoveOrgIDPResponse {}

message UpdateOrgIDPRequest {
    string id = 1;
    string name = 2;
    zitadel.idp.v1.IDPStylingType styling_type = 3;
}

message UpdateOrgIDPResponse {
    zitadel.v1.MetaData meta_data = 1;
    string id = 2;
    zitadel.idp.v1.IDPState state = 3;
    string name = 4;
    zitadel.idp.v1.IDPStylingType styling_type = 5;
}

message UpdateOrgIDPOIDCConfigRequest {
    string idp_id = 1;
    zitadel.idp.v1.OIDCConfig config = 2;
}

message UpdateOrgIDPOIDCConfigResponse {
    zitadel.v1.MetaData meta_data = 1;
    zitadel.idp.v1.OIDCConfig config = 2;
}
